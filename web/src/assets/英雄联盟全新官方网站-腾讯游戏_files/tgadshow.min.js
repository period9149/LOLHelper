var NewADsShowSwitch=function(){var n=["yl","codo","dnf","x52","cf","bns","nz","speed","x5","smoba","mpt2.tgideas","speedm","castleclash"],e=location.protocol,a=[e+"//cf.qq.com/m/web201707/index.htm",e+"//codol.qq.com/main.shtml",e+"//yl.qq.com/main.shtml",e+"//dnf.qq.com/main.shtml",e+"//dnf.qq.com/maintest.shtml",e+"//cf.qq.com/maintest_idata.shtml",e+"//cf.qq.com/main.shtml",e+"//cf.qq.com/act/a20160520ntcls/index.htm",e+"//cf.qq.com/act/a20160520ntcls/index_tyf.htm",e+"//codol.qq.com/main_m.shtml",e+"//nz.qq.com/main.shtml",e+"//bns.qq.com/m/",e+"//bns.qq.com/index.shtml",e+"//bns.qq.com/main.shtml",e+"//bns.qq.com/cp/a20160511bnsyx/index.htm",e+"//bns.qq.com/act/a20161104community/index_bk.html",e+"//bns.qq.com/act/a20161104community/index.html",e+"//speed.qq.com/home/client_gg_2015.html",e+"//speed.qq.com/cp/a20190102live/ates.shtml",e+"//speed.qq.com/home/client_2012.shtml",e+"//speed.qq.com/home/client_newsbox.htm",e+"//x5.qq.com/main.shtml",e+"//nz.qq.com/m/index.shtml",e+"//nz.qq.com/m/",e+"//nz.qq.com/client/ntcls/index.shtml",e+"//nz.qq.com/act/a20170518idataroll/index.shtml",e+"//nz.qq.com/client/ntcls/community.shtml",e+"//5s.qq.com/main.shtml",e+"//5s.qq.com/cp/a20161226gift/index.htm",e+"//5s.qq.com/m/",e+"//5s.qq.com/m/index.shtml",e+"//pvp.qq.com/ingame/cultural/index.shtml",e+"//pvp.qq.com/ingame/cultural/index_2.shtml",e+"//game.open.qq.com/"],i=function(){var e=location.hostname.replace(".qq.com","");return"sm"==e&&(e="smite"),"5s"==e&&(e="x52"),"eafifa"==e&&(e="fifa"),"codol"==e&&(e="codo"),"mho"==e&&(e="mh"),"pvp"==e&&(e="smoba"),"game.open"==e&&(e="castleclash"),e};return{isGrayServiceFunc:function(){var e=i();for(var t in n)if(!isNaN(t)&&n[t]==e)return!0;return!1},isGrayUrlFunc:function(){var e=i();if(0<="mpt2.tgideas".indexOf(e))return!0;if(-1!=(n=location.href.indexOf("?")))var t=location.href.slice(0,n);else t=location.href;for(var n in t=t.replace(/(#*$)/g,""),a)if(!isNaN(n)&&a[n]==t)return!0;return!1}}}();if(NewADsShowSwitch.isGrayServiceFunc()&&NewADsShowSwitch.isGrayUrlFunc()){var start=new Date,AdsShowEngine=function(){var p=document,P=1*new Date,x="",O=0,e=navigator.userAgent.toLowerCase(),g=-1!=e.indexOf("msie"),C=(e.indexOf("opera"),"data-tgadieg"),M="data-TGAD",U="data-tgad",t=location.protocol,R=0,F=0,B=[],H=t+"//logs.game.qq.com/easnew/go/eas.php",G=t+"//apps.game.qq.com/client_pop/recommendReport",z=t+"//ossweb-img.qq.com/images/clientpop/idata_ad/idata_ad_",c=t+"//apps.idata.qq.com/outer/ad_recommend_list",a=t+"//apps.idata.qq.com/outer/admore_recommend",$=t+"//apps.idata.qq.com/outer/ad_log_report",i=t+"//ossweb-img.qq.com/images/clientpop/idata_ad/idata_adm_";objPageAdElements={},objAdElementMap={},Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n});var V=function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return t},r=function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=p.cookie.match(n))?unescape(t[2]):""};function W(e){for(var t=p.getElementsByTagName("script"),n=t.length,a=null;n--;)if((a=t[n]).src==e){var i=a.parentNode;i&&1===i.nodeType&&i.removeChild(a)}}var u=function(e,t,n){var a,i,r,o,d=p.createElement("script"),s=(p.getElementsByTagName("head")[0],bFn2=!0),l=p.getElementsByTagName("script"),c=l.length,m=!1;for(null!=t&&void 0!==t||(s=!1),null!=n&&void 0!==n||(bFn2=!1),d.src=e,d.setAttribute("charset","UTF-8"),d.onloadDone=!1,g?(i="readystatechange",r=function(e){"loaded"!==d.readyState&&"complete"!==d.readyState||d.onloadDone||(d.onloadDone=!0,s&&t(),d.onreadystatechange=null)},(a=d).addEventListener?a.addEventListener(i,r,o):a.attachEvent&&a.attachEvent("on"+i,r),"loaded"===d.readyState&&null==d.nextSibling&&bFn2&&n()):(d.onload=function(){d.onloadDone=!0,s&&t(),d.onload=null},d.onerror=function(){bFn2&&n(),d.onerror=null});c--;)if(l[c].src===e){t(),m=!0;break}m||p.documentElement.firstChild.insertBefore(d,null)},Y=function(e,t,n){var a=p.createElement("script");a.type="text/javascript",n&&a.setAttribute("charset",n),a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||((a.onreadystatechange=null)==t&&void 0===t||t(),p.getElementsByTagName("head")[0].removeChild(this))}:a.onload=function(){null==t&&void 0===t||t(),p.getElementsByTagName("head")[0].removeChild(this)},a.src=e,p.getElementsByTagName("head")[0].appendChild(a)},f=function(e){try{return new Function("return "+e)()}catch(t){return!1}},s=function(s,l,c,m,p,g){if(0!=p&&0<l.length){var n=i+m+".js?v="+P,e=function(){setTimeout(function(){W(n)},250);var o=f("iDataNew"+m);if(o){var e=l.join(","),d=a+"?channel_id="+m+"&uin="+p+"&appid="+x+"&pos_id="+e+"&channel=adrecommend&_="+P,t=function(){setTimeout(function(){W(d)},250);var e,t,n=f("RES_OBJ_ADM"+m),a=[];if(!1!==n&&0==n.errcode){for(var i=l.length,r=0;r<i;r++)n.data[l[r]]==undefined?(a.push(l[r]),l.splice(r,1),r--,i--):(objPageAdElements[m][l[r]].adType="10",t=n.data[l[r]].material_id,(e=o[t])==undefined?(a.push(l[r]),l.splice(r,1),r--,i--):(e.recommendId=n.data[l[r]].recommend_id,e.algo=n.data[l[r]].algo_type,e.taskId=n.data[l[r]].task_id,e.taskPid=n.data[l[r]].task_pid,e.setId=n.data[l[r]].set_id,e.materialId=n.data[l[r]].material_id,e.materialPid=n.data[l[r]].material_pid,e.schemeType=n.data[l[r]].task_type,e.pid=n.data[l[r]].pid,objPageAdElements[m][l[r]].adMaterial=e));h(s,a,c,m,p,g)}else h(s,l,c,m,p,g)};setTimeout(function(){u(d,t,function(){h(s,l,c,m,p,g)})},0)}else h(s,l,c,m,p,g)};setTimeout(function(){u(n,e,function(){h(s,l,c,m,p,g)})},0)}else h(s,l,c,m,p,g)},h=function(r,o,d,s,e,t){if(0!=e&&!function(e){var t;for(t in e)return!1;return!0}(r.precise)&&0<o.length&&null!=r.precise&&r.precise!=undefined){var n=o.join(","),l=c+"?channel_id="+s+"&uin="+e+"&appid="+x+"&pos_id="+n+"&_="+P,a=function(){var e,t;if(setTimeout(function(){W(l)},250),preciseData=f("RES_OBJ"+s),!1!==preciseData&&0==preciseData.errcode)for(var n=o.length,a=0;a<n;a++)preciseData.data[o[a]]==undefined?(d.push(o[a]),o.splice(a,1),a--,n--):(objPageAdElements[s][o[a]].adType="11",tmpBannerId=preciseData.data[o[a]].pos_id,t=preciseData.data[o[a]].items,r.precise[tmpBannerId]&&t==r.precise[tmpBannerId].adId&&(e=r.precise[tmpBannerId]),e==undefined?(d.push(o[a]),o.splice(a,1),a--,n--):(e.recommendId=preciseData.data[o[a]].recommend_id,e.algoType=preciseData.data[o[a]].algo_type,objPageAdElements[s][o[a]].adMaterial=e));else d=o;if(0<d.length)for(var i in d)isNaN(i)||(objPageAdElements[s][d[i]].adType="2",objPageAdElements[s][d[i]].adMaterial=r.common[d[i]]);m(s,Object.keys(objPageAdElements[s]))};setTimeout(function(){u(l,a,a)},0)}else{if(0<(d=o).length)for(var i in d)isNaN(i)||(objPageAdElements[s][d[i]].adType="2",objPageAdElements[s][d[i]].adMaterial=r.common[d[i]]);m(s,Object.keys(objPageAdElements[s]))}},m=function(e,t){if(objPageAdElements[e]!=undefined){var n=null,a=null,i=null,r=null,o=null,d=null,s=null,l=null,c=null,m=null;for(var p in objAdElementMap[e])if((n=objAdElementMap[e][p])!=undefined&&null!=n&&objPageAdElements[e][n.banner]!=undefined&&null!=objPageAdElements[e][n.banner])if(n.adType=objPageAdElements[e][n.banner].adType,n.adMaterial=objPageAdElements[e][n.banner].adMaterial,a=n.element,i=n.adType,r=n.isRendered,o=n.adMaterial,isDynamicPos=n.isDynamicPos,o!=undefined){V(new Date,"yyyy-MM-dd hh:mm:ss");var g="",u="",f="",h="",b="",v="",_=(location.href,""),A="",w="",y="",q="",j="",T="",k="",E=(h="",b="",""),D="",L="",S="",I="";if(a.attributes[C]||a.attributes[M]||a.attributes[U]){if("1"==r)continue;if(isDynamicPos&&1==o.isBottom)(N=a.parentNode).parentNode.removeChild(N);if(d=o.adUrl||"",s=o.imgUrl||"",l=o.Fname||o.adMemo||"",strDetail=o.adMemo||o.ad_memo||"",c=o.popWidth||"",m=o.popHeight||"",imgBeginTime=o.beginTime||"",imgEndTime=o.endTime||"","5",g=o.actionID||"",u=o.adId||"",f=t[p]||"",h=o.recommendId||"0",v=o.ecode||"",A=o.pid||"",w=o.setId||"",y=o.materialId||"",q=o.materialPid||"",j=o.taskId||"",T=o.taskPid||"",k=o.schemeType,h=o.recommendId||"",b="",E=location.href,L=o.algo||"",D=o.adType||"",S=o.beginTime||"",I=o.endTime||"",_=e+"."+f+"."+u+"."+v,a.id=u,a.onclick=Z(k,e,v,f,h,L,D,T,w,q,b,E,S,I,A,j,y,d,P),"#"!=d&&""!=d?(a.target="_blank",a.href=d):a.href="javascript:;",a.innerHTML="<img src='"+s+"?_r="+P+"' alt="+l+" title= "+l+" data-detail='"+strDetail+"' data-starttime='"+imgBeginTime+"' data-endtime='"+imgEndTime+"' width="+c+" height="+m+" />",n.isRendered="1","0"==i||"10"==i||"11"==i){var J=G+"?bid="+x+"&act_type=5&algo=4&uin="+O+"&recommend_id=0&t="+P+"&loc="+f+"&id="+u+"&act_id="+g+"&table_type=1&e_code="+v;if("10"==i)J=$+"?uin="+O+"&pid="+A+"&appid="+x+"&channel=adrecommend&task_id="+j+"&material_id="+y+"&world_id=&table_type=1&msg="+(k+"|"+e+"|"+v+"|"+f+"|"+h+"|"+L+"|"+D+"|"+T+"|"+w+"|"+q+"|"+b+"|"+E+"|"+S+"|"+I)+"&t="+P}else J=H+"?m=SendLog&show_ads="+_+"&ad_url="+encodeURIComponent(d)+"&click_type=1&t="+(new Date).getTime();Y(J,function(){})}}else{var N;isDynamicPos&&(N=a.parentNode).parentNode.removeChild(N)}R++,W(z+e+".js?v="+P),K(B,R,F)}},Z=function(m,e,t,n,p,g,u,f,h,b,v,_,A,w,y,q,j,T,k){return function(){var e=this.id,t="",n="",a=this.getAttribute&&this.getAttribute(C)||this.getAttribute(M);if("string"==typeof a&&0<a.length&&2==a.split(",").length){var i=a.split(",");2!=i.length||isNaN(i[0])||isNaN(i[1])||(t=i[0],n=i[1])}var r=1*new Date,o=objPageAdElements[t][n];if(o)var d=o.adType||"",s=o.adMaterial.actionID||"",l=o.adMaterial.ecode||"";var c="";"0"==d||"10"==d||"11"==d?(c=G+"?bid="+x+"&act_type=5&algo=4&uin="+O+"&recommend_id=0&t="+r+"&loc="+n+"&id="+e+"&act_id="+s+"&table_type=2&e_code="+l,"10"==d&&(c=$+"?uin="+O+"&pid="+y+"&appid="+x+"&channel=adrecommend&task_id="+q+"&material_id="+j+"&world_id=&table_type=2&msg="+(m+"|"+t+"|"+l+"|"+n+"|"+p+"|"+g+"|"+u+"|"+f+"|"+h+"|"+b+"|"+v+"|"+_+"|"+A+"|"+w)+"&t="+k)):c=H+"?m=SendLog&show_ads="+(t+"."+n+"."+e+"."+l)+"&ad_url="+encodeURIComponent(T)+"&click_type=2&t="+(new Date).getTime(),Y(c,function(){})}},K=function(e,t,n){if(t<0||n<t)t==n+1&&window.gpmAdProcess!=undefined&&window.gpmAdProcess();else{var a=e[t];urlTmp=z+a+".js?v="+P;var i=function(){jTmpData=f("gAds"+a),!1!==jTmpData&&function(e,t,n){if(null!=e&&"undefined"!=e&&null!=t&&"undefined"!=t){var a=Object.keys(objPageAdElements[e]);if(!(a.length<=0)){var i=t,r=[],o=[];for(var d in a)isNaN(d)||(i.force[a[d]]!=undefined&&null!=i.force[a[d]]?(r.push(a[d]),objPageAdElements[e][a[d]].adType="0",objPageAdElements[e][a[d]].adMaterial=i.force[a[d]]):o.push(a[d]));s(i,o,[],e,n,function(){})}}}(a,jTmpData,O)};setTimeout(function(){u(urlTmp,i,function(){})},0)}};return{run:function(){var e,t;"sm"==(e=location.hostname.replace(".qq.com",""))&&(e="smite"),"5s"==e&&(e="x52"),"eafifa"==e&&(e="fifa"),"codol"==e&&(e="codo"),"pvp"==e&&(e="smoba"),"game.open"==e&&(e="castleclash"),x=e,(t=r("openid"))||(t=r("pt2gguin")?r("pt2gguin").substr(1).replace(/\b(0+)/gi,""):0),O=t,function(){for(var e,t,n=p.getElementsByTagName("*"),a=n.length,i=[],r={};a--;)"string"==typeof(t=(e=n[a]).getAttribute&&e.getAttribute(C)||e.getAttribute(M)||e.getAttribute(U))&&0<t.length&&2<=t.split(",").length&&2<=(i=t.split(",")).length&&!isNaN(i[0])&&!isNaN(i[1])&&((r={}).element=e,r.adType="2",r.isRendered="0",r.adMaterial=null,r.isDynamicPos=3==i.length&&1==i[2],r.channel=i[0],r.banner=i[1],objPageAdElements[i[0]]==undefined?(objPageAdElements[i[0]]={},objPageAdElements[i[0]][i[1]]=r,objAdElementMap[r.channel]=[]):objPageAdElements[i[0]][i[1]]=r,objAdElementMap[r.channel].push(r))}();var n=Object.keys(objPageAdElements);n.length<=0||(F=n.length-1,K(B=n,R,F))}}}();AdsShowEngine.run()}else{var TGAdsShow=function(){var protocol=location.protocol,l=document,_r=1*new Date,_s=2e3,t=null,nu=navigator.userAgent.toLowerCase(),ie=-1!=nu.indexOf("msie"),opera=-1!=nu.indexOf("opera"),strAttribute="data-TGAD",strAttributeTitle="title-TGAD",strAttributeSubTitle="data-subtitle",recLoad=!1,grey=!1,game,gpmObjJson,iUin,arrLength,gpmArrLength,arrLinks=[],gpmArrLinks=[],gpmUsedArr=[],gpmTmpArr=[],arrLoadLinks=[],showForceArr=[],ShowAdList=[],arrAdId=[],preview=document.getElementById("preview"),adJsPre=protocol+"//game.qq.com/time/qqadv/Info_new_",adSpecialJsPre=protocol+"//ossweb-img.qq.com/images/clientpop/ads/Info_new_",adImgPre=protocol+"//ossweb-img.qq.com/upload/adw/",sendClickUrl=protocol+"//apps.game.qq.com/adw_sendclick/api/send_click.php",gpmRecUrl=protocol+"//apps.game.qq.com/client_pop/daoju/api.php",gpmAdJsPre=protocol+"//ossweb-img.qq.com/images/clientpop/adrecommend/adrecommend_",LogCgi=protocol+"//logs.game.qq.com/easnew/go/eas.php",gpmSendClickUrl=protocol+"//apps.game.qq.com/client_pop/recommendReport",sb=[3513,3514,3515,3516,3517,5082,5083,5084,11514,11515,755,756,757,758,759,3199,7151,10456,10457,14016];if(null!=preview){var s=document.getElementById("preview").src,env=getParameter(s,"env");"DevelopEcho"==env?(adJsPre=protocol+"//echoweb.qq.com/data/ad/js/qqadv/Info_new_",adImgPre=protocol+"//echoweb.qq.com/data/ad/img/",sendClickUrl=protocol+"//echoweb.qq.com/apps/adw_sendclick/api/send_click.php"):("Develop"==env?(adJsPre=protocol+"//game.qq.com/time/qqadv_develop/Info_new_",adImgPre=protocol+"//ossweb-img.qq.com/upload/adw_develop/"):"Beta"==env?(adJsPre=protocol+"//game.qq.com/time/qqadv_beta/Info_new_",adImgPre=protocol+"//ossweb-img.qq.com/upload/adw_beta/"):(adJsPre=protocol+"//game.qq.com/time/qqadv/Info_new_",adImgPre=protocol+"//ossweb-img.qq.com/upload/adw/"),sendClickUrl=protocol+"//apps.game.qq.com/adw_sendclick/api/send_click.php")}function attach(e,t,n,a){e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent("on"+t,n)}function getUin(){return gCookie("pt2gguin")?gCookie("pt2gguin").substr(1).replace(/\b(0+)/gi,""):0}function gCookie(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=l.cookie.match(n))?unescape(t[2]):""}function getGame(){var e=location.hostname.replace(".qq.com","");return"sm"==e&&(e="smite"),"5s"==e&&(e="x52"),"eafifa"==e&&(e="fifa"),e}function loadJson(e,t,n){var a=l.createElement("script"),i=(l.getElementsByTagName("head")[0],bFn2=!0),r=l.getElementsByTagName("script"),o=r.length,d=!1;for(null!=t&&void 0!==t||(i=!1),null!=n&&void 0!==n||(bFn2=!1),a.src=e,a.onloadDone=!1,ie?(attach(a,"readystatechange",function(e){"loaded"!==a.readyState&&"complete"!==a.readyState||a.onloadDone||(a.onloadDone=!0,i&&t(),a.onreadystatechange=null)}),"loaded"===a.readyState&&null==a.nextSibling&&bFn2&&n()):(a.onload=function(){a.onloadDone=!0,i&&t(),a.onload=null},a.onerror=function(){bFn2&&n(),a.onerror=null});o--;)if(r[o].src===e){t(),d=!0;break}d||l.documentElement.firstChild.insertBefore(a,null)}function loadRecData(e){var t=iUin,n=game,a=[];for(var i in showForceArr)gpmObjJson.banner&&delete gpmObjJson.banner[showForceArr[i]];for(var r in arrLinks)if(arrLinks[r].a){var o=arrLinks[r].a.split(",");arrAdId.push(o[1])}for(var r in gpmObjJson.banner)inarr(arrAdId,r)&&a.push(r);var d=a.join(",");if(d){var s=gpmRecUrl+"?sence=1&start=1&end=10&uin="+t+"&pdName="+n+"&pos_id="+d+"&t="+_r,l=function(){setTimeout(function(){removeScript(s)},250),showGpmADs(e)};setTimeout(function(){loadJson(s,l,l)},0)}else loadADs(0)}function inarr(e,t){var n=String.fromCharCode(2);return new RegExp(n+t+n).test(n+e.join(n)+n)}function loadGpmADs(){var e=gpmArrLinks[0].a.split(",");e[0],e[1];loadADs(0)}function loadADs(e){var t=e;if(t<arrLength){var n=arrLinks[t],a=n.o,i=n.a.split(","),r=i[0],o=i[1],d=!1;if(!isNaN(r)&&!isNaN(o)){if(inarr(sb,o))var s=adSpecialJsPre+r+".js?v="+_r;else s=adJsPre+r+".js?v="+_r;var l=function(){arrLoadLinks[r]=1,d=!0,setTimeout(function(){removeScript(s)},250),show(a,r,o,t)};1==arrLoadLinks[r]?show(a,r,o,t):setTimeout(function(){loadJson(s,function(){d||l()},function(){d||l()})},0),opera&&setTimeout(function(){d||l()},250)}}}function showForceADs(e){try{gpmObjJson=new Function("return gDaTaNew"+e)()}catch(p){return void loadADs(0)}if(gpmObjJson.force){var t=gpmSendClickUrl+"?bid="+game+"&act_type=5&algo=4&uin="+iUin+"&recommend_id=0&t="+_r;for(var n in gpmArrLinks)if(gpmArrLinks[n].a){var a=gpmArrLinks[n].o,i=gpmArrLinks[n].a.split(",")[1];for(var n in gpmObjJson.force)if(n==i){for(var r=gpmObjJson.force[n].length,o=0;o<r;o++)compTime(gpmObjJson.force[n][o].beginTime,gpmObjJson.force[n][o].endTime,1)||(gpmObjJson.force[n].splice(o,1),o--,r--);if(0<(r=gpmObjJson.force[n].length)){var d=0;1<r&&(d=randNum(0,r-1)),showForceArr.push(i);for(var s=gpmObjJson.force[n][d],l=e+","+i,c=s.iAdId,m=(o=0,0);o<arrLinks.length;o++)arrLinks[o].a!=l&&(arrLinks[m++]=arrLinks[o]);if(arrLinks.length-=1,a.attributes[strAttribute]){a.id=c;showHtml(a,s,1,t)}}}}}gpmArrLength=arrLength=(gpmArrLinks=arrLinks).length,loadRecData(e)}function showHtml(e,t,n,a){if(1==n)var i=getPosId(e),r=getForceActId(e),o=getForceEcodeId(e);else i=getPosId(e),r=getActId(e.id),o=getEcodeId(e.id);e.onclick=function(){var e=a+"&loc="+i+"&id="+this.id+"&act_id="+r+"&table_type=2&e_code="+o;fn.loadjs(e)},e.target="_blank",e.href=t.adUrl,e.innerHTML="<img src='"+t.imgUrl+"?_r="+_r+"' alt="+t.Fname+" title= "+t.Fname+" data-detail='"+t.ad_memo+"' width="+t.popWidth+" height="+t.popHeight+" />";var d=a+"&loc="+i+"&id="+e.id+"&act_id="+t.actionID+"&table_type=1&e_code="+t.ecode;fn.loadjs(d)}function showGpmADs(e){try{gpmRecJson=new Function("return RES_OBJ")(),0==gpmRecJson.errcode&&(recLoad=!0)}catch(v){recLoad=!1}if(recLoad){if(!gpmRecJson.data)return void loadADs(0);if(!gpmRecJson.data.props)return void loadADs(0);for(var t=gpmRecJson.data.recommend_id,n=gpmRecJson.data.algo_type,a=gpmSendClickUrl+"?bid="+game+"&act_type=5&algo="+n+"&uin="+iUin+"&recommend_id="+t+"&t="+_r,i=0;i<gpmArrLinks.length;i++){var r=gpmArrLinks[i].o,o=gpmArrLinks[i].a.split(",")[1];for(var d in gpmRecJson.data.props){var s=gpmRecJson.data.props[d].pos_id,l=gpmRecJson.data.props[d].items;if(o==s&&gpmObjJson.iAdId&&gpmObjJson.iAdId[l]&&compTime(gpmObjJson.iAdId[l].beginTime,gpmObjJson.iAdId[l].endTime)){var c=gpmObjJson.iAdId[l],m=e+","+s;if(gpmTmpArr.push(m),r.attributes[strAttribute])r.id=l,showHtml(r,c,0,a)}}}}else{if(!gpmObjJson.banner)return void loadADs(0);a=gpmSendClickUrl+"?bid="+game+"&act_type=5&algo=0&uin="+iUin+"&recommend_id=0&t="+_r;if(gpmObjJson.adsize)for(var p in gpmObjJson.adsize)for(i=0;i<gpmObjJson.adsize[p].length;i++)compTime(gpmObjJson.adsize[p][i].beginTime,gpmObjJson.adsize[p][i].endTime)||gpmObjJson.adsize[p].splice(i,1);for(var d in gpmArrLinks){r=gpmArrLinks[d].o,o=gpmArrLinks[d].a.split(",")[1];if(gpmObjJson.banner[o]){var g=gpmObjJson.banner[o],u=(s=g.banner_id,g.banner_width+"*"+g.banner_height);if(gpmObjJson.adsize&&gpmObjJson.adsize[u]){var f=!1,h=gpmObjJson.adsize[u];if(gpmUsedArr[u]){var b=gpmUsedArr[u];if(h[b]){f=!0;c=h[b];gpmUsedArr[u]=b+1}}else if(h[0]){f=!0;c=h[0];gpmUsedArr[u]=1}if(f&&compTime(c.beginTime,c.endTime)){m=e+","+s,l=c.iAdId;if(gpmTmpArr.push(m),r.attributes[strAttribute])r.id=l,showHtml(r,c,0,a)}}}}}for(var d in gpmTmpArr)for(m=gpmTmpArr[d],i=0;i<arrLinks.length;i++)arrLinks[i].a==m&&arrLinks.splice(i,1);arrLength=arrLinks.length,loadADs(0)}function show(o,a,b,c){var d=o,_c=c,objJson=null,strTitle=null,strSubTitle;try{objJson=new Function("return oDaTaNew"+a)()}catch(e){objJson=inarr(sb,b)?eval("oDaTaNew"+a+'={"pos'+b+'":["Json Error!!","'+adSpecialJsPre+a+'.js","ad-loading.gif","50","50"]}'):eval("oDaTaNew"+a+'={"pos'+b+'":["Json Error!!","'+adJsPre+a+'.js","ad-loading.gif","50","50"]}')}for(var k in objJson)if(b==k.toString().substring(3)){var f=eval("oDaTaNew"+a+"."+k),strHref=f[1],strlistdate=f[8],tas_code=fn.getUrlVar(f[1],"tas_code");try{strTitle=decodeURI(f[0]),strSubTitle=decodeURI(f[9])}catch(err){strTitle=f[0],strSubTitle=f[9]}if(null!=tas_code&&tas_code!=undefined||(tas_code=fn.getUrlVar(strHref,"e_code"),null!=tas_code&&tas_code!=undefined||(tas_code=0)),d.attributes[strAttribute]){if(f){var pgv="ad."+a+"."+b,ad_id=strlistdate,reportUrl=gpmSendClickUrl+"?bid="+game+"&act_type=5&algo=4&uin="+iUin+"&recommend_id=0&t="+_r;if(strlistdate&&(pgv=pgv+"."+strlistdate),d.onclick=function(){if(inarr(sb,b))var e=f[10],t=f[11],n=reportUrl+"&loc="+b+"&id="+ad_id+"&act_id="+e+"&table_type=2&e_code="+t;else n=LogCgi+"?m=SendLog&show_ads="+(a+"."+b+"."+strlistdate+"."+tas_code)+"&ad_url="+encodeURIComponent(this.href)+"&click_type=2&t="+(new Date).getTime();fn.loadjs(n,function(){})},d.target="_blank",d.href=strHref,inarr(sb,b))var imgPath=f[2];else var imgPath=adImgPre+f[2];if(d.innerHTML="<img  src='"+imgPath+"' alt="+strTitle+" title="+strTitle+" data-detail='"+strSubTitle+"'  width="+f[3]+" height="+f[4]+" />",d.removeAttribute(strAttribute),inarr(sb,b)){var act_id=f[10],e_code=f[11],jsUrl=reportUrl+"&loc="+b+"&id="+ad_id+"&act_id="+act_id+"&table_type=1&e_code="+e_code;fn.loadjs(jsUrl,function(){})}else{var ShowAdInfo=a+"."+b+"."+f[8]+"."+tas_code;ShowAdList.push(ShowAdInfo)}}}else d.attributes[strAttributeTitle]?(d.innerHTML=strTitle,"A"==d.nodeName&&(d.href=strHref),d.removeAttribute(strAttributeTitle)):d.attributes[strAttributeSubTitle]&&(d.innerHTML=strSubTitle,d.removeAttribute(strAttributeSubTitle))}if(_c++,_c==arrLength){if(0<ShowAdList.length){var ShowAdStr=ShowAdList.join("|"),ShowUrl=LogCgi+"?m=SendLog&show_ads="+ShowAdStr+"&click_type=1&t="+(new Date).getTime();fn.loadjs(ShowUrl,function(){})}window.gpmAdProcess!=undefined&&window.gpmAdProcess()}loadADs(_c)}function removeScript(e){for(var t=l.getElementsByTagName("script"),n=t.length,a=null;n--;)if((a=t[n]).src==e){var i=a.parentNode;i&&1===i.nodeType&&i.removeChild(a)}}function compTime(e,t,n){var a=(new Date).getTime();return e=new Date(e.replace(/-/g,"/")).getTime(),t=new Date(t.replace(/-/g,"/")).getTime(),0<=(a-e)/3600/1e3&&(!(0<(a-t)/3600/1e3)||1!=n&&0<(t-(a-12096e5))/3600/1e3)}function getParameter(e,t){var n=e.match(new RegExp("[?&]"+t+"=([^&]*)(&?)","i"));if(n?n[1]:null==n)return n?n[1]:n}function randNum(e,t){var n=t-e,a=Math.random();return e+Math.round(a*n)}function getActId(e){return gpmObjJson.iAdId[e].actionID?gpmObjJson.iAdId[e].actionID:0}function getEcodeId(e){return gpmObjJson.iAdId[e].ecode?gpmObjJson.iAdId[e].ecode:0}function getForceActId(e){var t=(e.getAttribute&&e.getAttribute(strAttribute)).split(",")[1];if(gpmObjJson.force[t]){var n=0;if(1<gpmObjJson.force[t].length)for(var a in gpmObjJson.force[t])gpmObjJson.force[t][a].iAdId==e.id&&(n=a);return gpmObjJson.force[t][n].actionID}return 0}function getForceEcodeId(e){var t=(e.getAttribute&&e.getAttribute(strAttribute)).split(",")[1];if(gpmObjJson.force[t]){var n=0;if(1<gpmObjJson.force[t].length)for(var a in gpmObjJson.force[t])gpmObjJson.force[t][a].iAdId==e.id&&(n=a);return gpmObjJson.force[t][n].ecode}return 0}function getPosId(e){return(e.getAttribute&&e.getAttribute(strAttribute)).split(",")[1]}function inUinList(e){if(grey){var t=["08","12"];if(0<t.length){var n=e.split(""),a=n[n.length-2]+""+n[n.length-1];for(var i in t)if(t[i]==a)return!0;return!1}return!0}return!0}function loadPreAd(){var e=location.pathname;""!=e&&"/"!=e&&"/index.html"!=e&&"/index.htm"!=e&&"/index.shtml"!=e||fn.loadjs(protocol+"//ossweb-img.qq.com/images/clientpop/js/predialog.js")}return fn={getUrlVars:function(e){for(var t,n=[],a=e.slice(e.indexOf("?")+1).split("&"),i=0;i<a.length;i++)t=a[i].split("="),n.push(t[0]),n[t[0]]=t[1];return n},getUrlVar:function(e,t){return fn.getUrlVars(e)[t]},loadjs:function(e,t,n){var a=document.createElement("script");a.type="text/javascript",n&&a.setAttribute("charset",n),a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||((a.onreadystatechange=null)==t&&void 0===t||t(),document.getElementsByTagName("head")[0].removeChild(this))}:a.onload=function(){null==t&&void 0===t||t(),document.getElementsByTagName("head")[0].removeChild(this)},a.src=e,document.getElementsByTagName("head")[0].appendChild(a)}},{init:function(e){"object"==typeof e||l.getElementById(e);for(var t,n,a=l.getElementsByTagName("*"),i=a.length,r=0;i--;)"string"==typeof(n=(t=a[i]).getAttribute&&t.getAttribute(strAttribute)||t.getAttribute(strAttributeTitle)||t.getAttribute(strAttributeSubTitle))&&0<n.length&&2==n.split(",").length&&(gpmArrLinks[r]=arrLinks[r]={},gpmArrLinks[r].o=arrLinks[r].o=t,gpmArrLinks[r].a=arrLinks[r].a=n,r++);gpmArrLength=arrLength=arrLinks.length,0<arrLength&&(iUin=getUin(),game=getGame(),inUinList(iUin)&&!NewADsShowSwitch.isGrayServiceFunc()?loadGpmADs():loadADs(0))}}}();TGAdsShow.init()}!function(){var t=function(){this.onRenderFinished=null,this.protocol=location.protocol,this.commonLogCgi=this.protocol+"//logs.game.qq.com/easnew/go/eas.php",this.idataAdJsPre=this.protocol+"//ossweb-img.qq.com/images/clientpop/idata_ad/idata_ad_",this.jsDataValPre="gAds",this.NewADsShow_Middle_Cxt={tplElList:[],loadJSCache:{},cleanedAdMap:null,vnodeParent:{},displayedRpt:{},nodeForClean:[]},this.hGet=function(e,t,n){var a=this;if(n&&1==n)this.NewADsShow_Middle_Cxt[e]&&t();else{var i=document.createElement("script");i.type="text/javascript",i.setAttribute("charset","UTF-8"),i.src=e,i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,n&&1==n&&(a.NewADsShow_Middle_Cxt[e]=!0),t())}:i.onload=function(){n&&1==n&&(a.NewADsShow_Middle_Cxt[e]=!0),t()},document.getElementsByTagName("head")[0].appendChild(i)}},this.gJsonData=function(e){try{return new Function("return "+e)()}catch(t){return!1}},this.gAllAdElems=function(){for(var e,t=document.getElementsByTagName("script"),n=t.length,a=0;a<n;a++)if("text/html"==(e=t[a]).type&&e.getAttribute("data-channels")){var i="t-idata-tmp-id"+a;e.tParentNode=e.parentNode,e.setAttribute("id",i),this.NewADsShow_Middle_Cxt.nodeForClean.push(i),this.NewADsShow_Middle_Cxt.tplElList.push(e)}},this.multiLoadScript=function(t,n,e){t.length;var a={},i=this,r=t.pop(),o=function(){var e=i.idataAdJsPre+r+".js";i.hGet(e,function(){a[r]=i.gJsonData(i.jsDataValPre+r),0,0<t.length&&(r=t.pop())?o():n(a)})};o()},this.renderTpls=function(){if(!(this.NewADsShow_Middle_Cxt.tplElList.length<1)){for(var e={},t=0;t<this.NewADsShow_Middle_Cxt.tplElList.length;t++){var n=this.NewADsShow_Middle_Cxt.tplElList[t].getAttribute("data-channels").match(/(\d+):(\d+)/g);if("object"==typeof n)for(var a=0;a<n.length;a++){e[n[a].split(":")[0]]=!0}}var i=[];for(k in e)i.push(k);var c=this;this.multiLoadScript(i,function(e){var t={};for(k in e){var n=e[k].common;for(k1 in n){t[k+":"+k1]=n[k1]}var a=e[k].force;for(k1 in a){t[k+":"+k1]=a[k1]}}c.NewADsShow_Middle_Cxt.cleanedAdMap=t;for(var i=0;i<c.NewADsShow_Middle_Cxt.tplElList.length;i++){var r=c.NewADsShow_Middle_Cxt.tplElList[i],o=r.getAttribute("data-channels").match(/(\d+):(\d+)/g);if("object"==typeof o){var d=c.fetchDataList(o,t);for(k in c.tgaTplEngine(r,d),d.tgaADList){var s=d.tgaADList[k];if(s.adId!=undefined&&!c.NewADsShow_Middle_Cxt.displayedRpt[s.adId]){var l=s.fromChan.split(":");2==l.length&&(c.NewADsShow_Middle_Cxt.displayedRpt[s.adId]=!0,c.simpleLogReport(s,l[0],l[1],1))}}}}c.isFunction(c.onRenderFinished)&&c.onRenderFinished()},function(e){})}},this.isFunction=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},this.fetchDataList=function(e,t){var n=[];for(k in e){var a=e[k];t[a]&&(t[a].fromChan=a,n.push(t[a]))}return{tgaADList:n}},this.clickEventHandler=function(e){var t=e.target||e.srcElement,n=t.getAttribute("t-chan"),a=(n+="").match(/(\d+)\:(\d+)/i);if(null!=a&&3==a.length){var i=a[1],r=a[2],o=this.NewADsShow_Middle_Cxt.cleanedAdMap[a[0]];o&&this.simpleLogReport(o,i,r,2)}},this.loopDepth=0,this.json2Str=function(e){this.loopDepth++;var t=typeof e;if("number"==t||"boolean"==t)return e;if("string"==t)return'"'+e+'"';var n=[],a="";try{for(k in e)n.push(k+":"+this.json2Str(e[k]));return a+="{"+n.join(",")+"}"}catch(i){return""}},this.jsonStringify=function(e){var t="[";if(!e.length)return"";for(var n=[],a=null,i=0;i<e.length;i++){a=e[i];var r=[];for(k in a)r.push('"'+k+'":'+this.json2Str(a[k]));n.push("{"+r.join(",")+"}")}return t+=n.join(","),t+="]"},this.tgaTplEngine=function(e,t){var n="",a=e.getAttribute("t-list"),i=e.getAttribute("t-foreach");if(a&&i)alert("t-list与t-foreach 不能同时存在");else{for(var r in a&&(t[a]=t.tgaADList),n+="//template tgadshow.js?v3\n",n="\n\n",n+="var seg=[];\n",t){var o=typeof t[r],d="_"+r;n+="object"==o||"number"==o?"var "+d+" = "+this.jsonStringify(t[r])+";\n":"var "+d+" ='"+t[r]+"';\n"}i&&!a&&(n+="for( k in _tgaADList){\n",n+="var _"+i+" = _tgaADList[k];\n",n+="var __index = k;\n");var s=e.innerHTML,l=/<%([^%]+)?%>/g,c=0,m=/(^( )?([\++]|.+=.+|console|do|case|let|var|if|for|else|switch|case|break|continue|default|return|try|typeof|throw|goto|eval|{|}))(.*)?/,p=null;for(s=s.replace(/t-watch=['|"][1-9a-zA-Z]+['|"]/gi," t-chan='<%_"+i+".fromChan%>' t-adid='<%_"+i+".adId%>' "),p=function(e,t){return t?n+=e.match(m)?e+"\n":"seg.push("+e+");\n":!/^\s+$/.test(e)&&(n+='seg.push("'+e.replace(/"/g,'\\"').replace(/[\r\t\n]/g,"")+'");\n'),p};res=l.exec(s);)p(s.slice(c,res.index))(res[1],1),c=res.index+res[0].length;p(s.substr(c,s.length)),i&&!a&&(n+="}\n"),n+='return seg.join("");\n';var g=new Function(n).apply(),u=this,f=function(e){u.clickEventHandler(e)},h=e.getAttribute("t-cb");try{var b=e.getAttribute("id");if(null!=b){var v=document.getElementById(b);v.parentElement.removeChild(v)}}catch(w){}if(h&&0<h.length&&(n=h+"\n"),i){var _=e.tParentNode;null==_.getAttribute("t-clicked")&&(_.addEventListener?_.addEventListener("click",f,!0):_.attachEvent?_.attachEvent("onclick",f):_.onclick=f,_.setAttribute("t-clicked",!0)),_.innerHTML+=g}else{var A=document.createElement("div");A.setAttribute("idata-rendered","1"),A.innerHTML+=g,e.parentNode.replaceChild(A,e)}new Function(n).apply()}},this.simpleLogReport=function(e,t,n,a){var i=2;i&&(i=a);var r=e.adId,o=e.adId,d=e.ecode,s=t+"."+n+"."+r+"."+d,l=e.type,c=window.location.href,m=e.beginTime,p=e.endTime,g="",u="",f=(new Date).getTime();if("0"==l||"10"==l||"11"==l)g=forceLogCgi+"?bid="+gameId+"&act_type=5&algo=4&uin="+uin+"&recommend_id=0&t="+f+"&loc="+n+"&id="+r+"&act_id="+o+"&table_type=2&e_code="+d,"10"==l&&(u="|"+chanId+"|"+d+"|"+n+"||||||||"+c+"|"+m+"|"+p,g=multiChannelLogReportPre+"?uin="+uin+"&pid="+pid+"&appid="+gameId+"&channel=adrecommend&task_id="+taskId+"&material_id="+materialId+"&world_id=&table_type="+i+"&msg="+u+"&t="+f);else{var h=e.adUrl;g=this.commonLogCgi+"?m=SendLog&show_ads="+s+"&ad_url="+encodeURIComponent(h)+"&click_type="+i+"&t="+f}try{this.hGet(g,function(){})}catch(b){}},this.Run=function(){this.gAllAdElems(),this.renderTpls()}};try{var e=function(){var e=new t;window.tgADTplParserFinished&&(e.onRenderFinished=window.tgADTplParserFinished),e.Run()};window.addEventListener?window.addEventListener("load",e,!1):window.attachEvent?window.attachEvent("onload",e):window.onload=e,window.iData_New_Tplparser={run:e}}catch(n){}}();